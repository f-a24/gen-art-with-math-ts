"use strict";(self.webpackChunkgen_art_with_math_ts=self.webpackChunkgen_art_with_math_ts||[]).push([[546],{"./src/common.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>init});const init=title=>{document.querySelector("#title").textContent=title,globalP5Instance&&globalP5Instance.remove(),gui&&(gui.destroy(),gui=null)}},"./stories/chapter03.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Convergent:()=>Convergent,Rect:()=>Rect,RecurDiv:()=>RecurDiv,RecurDivGUI:()=>RecurDivGUI,Spiral:()=>Spiral,Square:()=>Square,SquareSpiral:()=>SquareSpiral,__namedExportsOrder:()=>__namedExportsOrder,default:()=>chapter03_stories});var p5_min=__webpack_require__("./node_modules/p5/lib/p5.min.js"),p5_min_default=__webpack_require__.n(p5_min),dat_gui_module=__webpack_require__("./node_modules/dat.gui/build/dat.gui.module.js"),common=__webpack_require__("./src/common.ts");const chapter03_stories={title:"Chapter03"},Convergent={render:()=>((0,common.S)("循環連分数への収束"),globalP5Instance=new(p5_min_default())((p=>{p.setup=()=>{let x=1;const alpha=(1+Math.sqrt(5))/2;p.createCanvas(500,200);const limPos=p.map(alpha,1,2,0,p.height);p.stroke(255,0,0),p.line(0,limPos,p.width,limPos);const step=p.width/10;p.stroke(0);for(let i=0;i<10;i++){const nextX=1+1/x,pos=p.map(x,1,2,0,p.height),nextPos=p.map(nextX,1,2,0,p.height);p.line(i*step,pos,(i+1)*step,nextPos),x=nextX}}})),"")},Square={render:()=>((0,common.S)("フィボナッチ数列の可視化"),globalP5Instance=new(p5_min_default())((p=>{let fibo=[0,1];const _drawSquare=()=>{let xPos=0,yPos=0;const nextFibo=fibo[fibo.length-2]+fibo[fibo.length-1],scalar=p.width/nextFibo;p.background(0,0,1);for(let i=1;i<fibo.length;i++)p.fill(.1*i%1,1,1),p.rect(scalar*xPos,scalar*yPos,scalar*fibo[i],scalar*fibo[i]),i%2==1?(xPos+=fibo[i],yPos-=fibo[i-1]):(xPos-=fibo[i-1],yPos+=fibo[i])};p.setup=()=>{p.createCanvas(500,500),p.colorMode("hsb",1),_drawSquare()},p.mouseClicked=()=>{const nextFibo=fibo[fibo.length-2]+fibo[fibo.length-1];fibo=p.append(fibo,nextFibo),_drawSquare(),console.log(nextFibo)}})),"")},SquareSpiral={render:()=>((0,common.S)("回り込むように正方形を敷き詰めてフィボナッチ長方形を作る"),globalP5Instance=new(p5_min_default())((p=>{let fibo=[0,1,1];const _drawSpiral=()=>{const SGN=[-1,1,1,-1];let xPos=0,yPos=0;const scalar=p.width/(2*fibo[fibo.length-1]);p.background(0,0,1);for(let i=1;i<fibo.length-1;i++)p.fill(.1*i%1,1,1),p.rect(scalar*xPos,scalar*yPos,scalar*SGN[(i+1)%4]*fibo[i],scalar*SGN[i%4]*fibo[i]),i%2==1?xPos+=SGN[i%4]*(fibo[i]+fibo[i+1]):yPos+=SGN[i%4]*(fibo[i]+fibo[i+1])};p.setup=()=>{p.createCanvas(500,500),p.colorMode("hsb",1),p.translate(p.width/2,p.height/2),_drawSpiral()},p.mouseClicked=()=>{const nextFibo=fibo[fibo.length-2]+fibo[fibo.length-1];fibo=p.append(fibo,nextFibo),_drawSpiral(),console.log(nextFibo)}})),"")},Rect={render:()=>((0,common.S)("フィボナッチ長方形の敷き詰めによって正方形を作る"),globalP5Instance=new(p5_min_default())((p=>{let fibo=[0,1,1];const _drawRect=()=>{const SGN=[-1,1,1,-1];let xPos=0,yPos=0;const scalar=p.width/(2*fibo[fibo.length-1]);p.background(0,0,1);for(let i=1;i<fibo.length-1;i++)p.fill(.1*i%1,1,1),p.rect(scalar*xPos,scalar*yPos,scalar*SGN[(i+1)%4]*fibo[i-1],scalar*SGN[i%4]*fibo[i]),i%2==1?xPos+=SGN[i%4]*(fibo[i-1]+fibo[i]):yPos+=SGN[i%4]*(fibo[i]+fibo[i+1])};p.setup=()=>{p.createCanvas(500,500),p.colorMode("hsb",1),p.translate(p.width/2,p.height/2),_drawRect()},p.mouseClicked=()=>{const nextFibo=fibo[fibo.length-2]+fibo[fibo.length-1];fibo=p.append(fibo,nextFibo),_drawRect(),console.log(nextFibo)}})),"")},RecurDiv={render:()=>((0,common.S)("正方形の再帰的なフィボナッチ分割"),globalP5Instance=new(p5_min_default())((p=>{let fibo,num=10,thr=1;const SGN=[1,1,-1,-1],_generateFibo=ind=>{fibo=[0,1];for(let i=1;i<ind;i++)fibo=p.append(fibo,fibo[i-1]+fibo[i]);fibo=p.reverse(fibo)},_colRect=(xPos,yPos,wd,ht,ind)=>{const scalar=p.width/fibo[0];p.fill(1*ind/num%1,1,1),p.rect(scalar*xPos,scalar*yPos,scalar*wd,scalar*ht)},_divRect=(xPos,yPos,ind,itr,sgnX,sgnY)=>{for(let i=0;i<num-ind;i++){const lng=fibo[i+ind],newSgnX=sgnX*SGN[(i+1)%4],newSgnY=sgnY*SGN[i%4];_colRect(xPos,yPos,newSgnX*lng,newSgnY*lng,ind+i),xPos+=newSgnX*lng,yPos+=newSgnY*lng,itr<thr&&_divSquare(xPos,yPos,ind+i,itr+1,-newSgnX,-newSgnY)}},_divSquare=(xPos,yPos,ind,itr,sgnX,sgnY)=>{for(let i=0;i<num-ind;i++){const lng0=fibo[i+ind+1],lng1=fibo[i+ind],newSgnX=sgnX*SGN[i%4],newSgnY=sgnY*SGN[(i+1)%4];_colRect(xPos,yPos,newSgnX*lng0,newSgnY*lng1,ind+i+1),xPos+=newSgnX*lng0,yPos+=newSgnY*lng1,itr<thr&&_divRect(xPos,yPos,i+ind+1,itr+1,-newSgnX,-newSgnY)}};p.setup=()=>{p.createCanvas(500,500),p.colorMode("hsb",1),p.background(0,0,1),_generateFibo(num),_divSquare(0,0,0,0,1,1)},p.mouseClicked=()=>{num=Math.trunc(p.random(2,10)),thr=Math.trunc(p.random(0,9)),console.log("num =",num,"thr =",thr),p.background(0,0,1),_generateFibo(num),_divSquare(0,0,0,0,1,1)}})),"")},RecurDivGUI={render:()=>((0,common.S)("再帰的なフィボナッチ分割のGUIプログラム"),globalP5Instance=new(p5_min_default())((p=>{let fibo;const SGN=[1,1,-1,-1],controls={num:10,thr:0},_colRect=(xPos,yPos,wd,ht,ind)=>{const scalar=p.width/fibo[0];p.fill(1*ind/controls.num%1,1,1),p.rect(scalar*xPos,scalar*yPos,scalar*wd,scalar*ht)},_divRect=(xPos,yPos,ind,itr,sgnX,sgnY)=>{const{num,thr}=controls;for(let i=0;i<num-ind;i++){const lng=fibo[i+ind],newSgnX=sgnX*SGN[(i+1)%4],newSgnY=sgnY*SGN[i%4];_colRect(xPos,yPos,newSgnX*lng,newSgnY*lng,ind+i),xPos+=newSgnX*lng,yPos+=newSgnY*lng,itr<thr&&_divSq(xPos,yPos,ind+i,itr+1,-newSgnX,-newSgnY)}},_divSq=(posX,posY,ind,itr,sgnX,sgnY)=>{const{num,thr}=controls;for(let i=0;i<num-ind;i++){const lng0=fibo[i+ind+1],lng1=fibo[i+ind],newSgnX=sgnX*SGN[i%4],newSgnY=sgnY*SGN[(i+1)%4];_colRect(posX,posY,newSgnX*lng0,newSgnY*lng1,ind+i+1),posX+=newSgnX*lng0,posY+=newSgnY*lng1,itr<thr&&_divRect(posX,posY,ind+i+1,itr+1,-newSgnX,-newSgnY)}};p.setup=()=>{p.createCanvas(500,500),gui=new dat_gui_module.ZP.GUI,gui.add(controls,"num",1,20),gui.add(controls,"thr",0,9)},p.draw=()=>{(ind=>{fibo=[0,1];for(let i=1;i<ind;i++)fibo=p.append(fibo,fibo[i-1]+fibo[i]);fibo=p.reverse(fibo)})(controls.num),p.colorMode("hsb",1),p.background(0,0,1),_divSq(0,0,0,0,1,1)}})),"")},Spiral={render:()=>((0,common.S)("フィボナッチらせんを描く"),globalP5Instance=new(p5_min_default())((p=>{let fibo=[0,1,1];const SGN=[-1,1,1,-1],_drawSpiral=()=>{let xPos=0,yPos=0;const scalar=p.width/(2*fibo[fibo.length-1]);p.background(0,0,1);for(let i=1;i<fibo.length-1;i++)p.stroke(0,0,0),p.rect(scalar*xPos,scalar*yPos,scalar*SGN[(i+1)%4]*fibo[i],scalar*SGN[i%4]*fibo[i]),p.stroke(0,1,1),p.arc(scalar*(xPos+SGN[(i+1)%4]*fibo[i]),scalar*(yPos+SGN[i%4]*fibo[i]),2*scalar*fibo[i],2*scalar*fibo[i],(1+i)*p.PI/2,(2+i)*p.PI/2),i%2==1?xPos+=SGN[i%4]*(fibo[i]+fibo[i+1]):yPos+=SGN[i%4]*(fibo[i]+fibo[i+1])};p.setup=()=>{p.createCanvas(500,500),p.colorMode("hsb",1),p.translate(p.width/2,p.height/2),_drawSpiral()},p.mouseClicked=()=>{const nextFibo=fibo[fibo.length-2]+fibo[fibo.length-1];fibo=p.append(fibo,nextFibo),_drawSpiral(),console.log(nextFibo)}})),"")},__namedExportsOrder=["Convergent","Square","SquareSpiral","Rect","RecurDiv","RecurDivGUI","Spiral"]}}]);