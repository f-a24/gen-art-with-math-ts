{"version":3,"file":"chapter05.stories-34b0f66a.js","sources":["../../src/chapter05.ts"],"sourcesContent":["import p5 from 'p5';\nimport { init } from './common';\n\n/**\n * フェルマーらせんを描く\n */\nexport const fermatSpiral = () => {\n  init('離散的なフェルマーらせん');\n\n  globalP5Instance = new p5((p: p5) => {\n    let itr = 0; // 描画の繰り返し回数\n    const scalar = 5; // 拡大倍率\n    const drawFermatSpiral = (rot: number) => {\n      const theta = 2 * p.PI * itr * rot; // 回転角\n      const v = p5.Vector.fromAngle(theta);\n      v.mult(scalar * p.sqrt(itr));\n      p.ellipse(v.x, v.y, scalar, scalar); // 点を描画\n    };\n    p.setup = () => {\n      p.createCanvas(500, 500);\n      p.background(255); // 背景を白くする\n    };\n    p.draw = () => {\n      p.translate(p.width / 2, p.height / 2); // 描画ウィンドウの中心に移動\n      p.fill(0); // 点を黒く塗る\n      drawFermatSpiral(17.0 / 55); // 引数を回転角とするフェルマーらせんの描画\n      itr++;\n    };\n  });\n  return '';\n};\n\n/**\n * フェルマーらせんと補助線を描く\n */\nexport const fermatSpiralLine = () => {\n  init('連続的なフェルマーらせんと中心角の等分線');\n\n  globalP5Instance = new p5((p: p5) => {\n    let itr = 0;\n    const scalar = 30;\n    const drawFermatSpiral = (rot: number) => {\n      const theta = 2 * p.PI * itr * rot; // 回転角\n      const v = p5.Vector.fromAngle(theta);\n      v.mult(scalar * p.sqrt(itr));\n      p.fill(0);\n      p.ellipse(v.x, v.y, 10, 10); // 点を描画\n    };\n    // 中心角の等分線を描く関数\n    const drawLine = (n: number) => {\n      for (let i = 0; i <= n / 2; i++) {\n        const v = p5.Vector.fromAngle((2 * i * p.PI) / n); // 円周上のn等分点を取る\n        v.mult(p.width / p.sqrt(2)); // 画面いっぱいに線を引くように拡大\n        p.line(v.x, v.y, -v.x, -v.y);\n      }\n    };\n    // 連続的なフェルマーらせんを描く関数\n    const drawRealCurve = (rot: number) => {\n      const STEP = 2 * p.PI * 0.01; // 曲線の精度\n      let theta = 0; // 偏角\n      let rad = 0; // 動径\n      p.noFill();\n      p.beginShape(); // 頂点をつないで図形を描画\n      while (rad < p.width / p.sqrt(2)) {\n        rad = scalar * p.sqrt(theta / (2 * p.PI * rot));\n        const v = p5.Vector.fromAngle(theta);\n        v.mult(rad);\n        p.vertex(v.x, v.y); // 頂点をセット\n        theta += STEP;\n      }\n      p.endShape();\n    };\n    p.setup = () => {\n      p.createCanvas(500, 500);\n      p.translate(p.width / 2, p.height / 2); // 描画ウィンドウの中心に移動\n      p.stroke(0, 0, 255);\n      drawLine(10); // 中心角の等分線を描く\n      p.stroke(255, 0, 0);\n      drawRealCurve(1.0 / 10); // 連続的なフェルマーらせんを描く\n    };\n    p.draw = () => {\n      p.translate(p.width / 2, p.height / 2); // 描画ウィンドウの中心に移動\n      p.noStroke(); // 輪郭線を消す\n      drawFermatSpiral(1.0 / 10);\n      itr++;\n    };\n  });\n  return '';\n};\n\n/**\n * フェルマーらせんを描く\n */\nexport const fermatSpiral2 = () => {\n  init('かたちの世代変化');\n\n  globalP5Instance = new p5((p: p5) => {\n    let itr = 0; // 描画の繰り返し回数\n    const scalar = 5; // 拡大倍率\n    const drawFermatSpiral = (rot: number) => {\n      const theta = 2 * p.PI * itr * rot; // 回転角\n      const v = p5.Vector.fromAngle(theta);\n      v.mult(scalar * p.sqrt(itr));\n      p.ellipse(v.x, v.y, scalar, scalar); // 点を描画\n    };\n    p.setup = () => {\n      p.createCanvas(500, 500);\n      p.background(255); // 背景を白くする\n    };\n    p.draw = () => {\n      p.translate(p.width / 2, p.height / 2); // 描画ウィンドウの中心に移動\n      p.noStroke();\n      p.fill(255, 0, 0, 127); // 点を赤く塗る\n      drawFermatSpiral(1.0 / 3);\n      // drawFermatSpiral(4.0 / 17);\n      p.fill(0, 0, 255, 127); // 点を青く塗る\n      drawFermatSpiral(1.0 / 61);\n      // drawFermatSpiral(17.0 / 72);\n      p.fill(0, 255, 0, 127); // 点を緑に塗る\n      drawFermatSpiral(20.0 / 61);\n      // drawFermatSpiral(72.0 / 305);\n      itr++;\n    };\n  });\n  return '';\n};\n"],"names":["fermatSpiral","init","p5","p","itr","scalar","drawFermatSpiral","rot","theta","v","fermatSpiralLine","drawLine","n","i","drawRealCurve","STEP","rad","fermatSpiral2"],"mappings":"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"}